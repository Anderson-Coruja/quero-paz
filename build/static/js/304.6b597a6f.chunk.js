"use strict";(self.webpackChunkquero_paz=self.webpackChunkquero_paz||[]).push([[304],{3304:(e,s,t)=>{t.r(s),t.d(s,{default:()=>i});var a=t(9379),n=t(5043),l=t(9620),r=t(579);const i=()=>{const[e,s]=(0,n.useState)({storage:{used:0,quota:0,percentage:0},performance:{loadTime:0,renderTime:0},usage:{blockedCalls:0,appStarts:0,lastUsed:null},database:{status:"checking",stores:[]},system:{online:navigator.onLine,userAgent:navigator.userAgent,language:navigator.language},tests:{lastRun:null,status:null,results:null}}),[t,i]=(0,n.useState)(30),[d,c]=(0,n.useState)(!1),o=async()=>{try{if(l.A.trackEvent(l.A.EVENT_TYPES.APP,"stats_collection",{timestamp:(new Date).toISOString()}),navigator.storage&&navigator.storage.estimate){const e=await navigator.storage.estimate();s((s=>(0,a.A)((0,a.A)({},s),{},{storage:{used:Math.round(e.usage/1024/1024*100)/100,quota:Math.round(e.quota/1024/1024*100)/100,percentage:Math.round(e.usage/e.quota*100)}})))}if(window.performance){const e=window.performance.getEntriesByType("navigation");if(e.length>0){const t=e[0];s((e=>(0,a.A)((0,a.A)({},e),{},{performance:{loadTime:Math.round(t.loadEventEnd-t.navigationStart),renderTime:Math.round(t.domComplete-t.domInteractive)}})))}}const e=l.A.getUsageStats(),t=JSON.parse(localStorage.getItem("silencedCalls")||"[]");s((s=>(0,a.A)((0,a.A)({},s),{},{usage:{blockedCalls:e.blockedCalls||t.length,silencedCalls:e.silencedCalls||0,appStarts:e.appStarts||0,errors:e.errorCount||0,lastUsed:e.lastUsed||null,totalEvents:e.totalEvents||0,eventsByType:e.eventsByType||{}}})));const n="true"===localStorage.getItem("dbInitialized")?"online":"offline";s((e=>(0,a.A)((0,a.A)({},e),{},{database:{status:n,stores:JSON.parse(localStorage.getItem("dbStores")||"[]")}})));const r=JSON.parse(localStorage.getItem("testHistory")||"[]");if(r.length>0){const e=r[r.length-1];s((s=>(0,a.A)((0,a.A)({},s),{},{tests:{lastRun:e.timestamp,status:e.overall,results:e.results}})))}s((e=>(0,a.A)((0,a.A)({},e),{},{system:(0,a.A)((0,a.A)({},e.system),{},{online:navigator.onLine})})));const i=l.A.getEvents(null,20);s((e=>(0,a.A)((0,a.A)({},e),{},{events:i})))}catch(e){console.error("Erro ao coletar estat\xedsticas:",e),l.A.trackError("stats_collection",e.message,{stack:e.stack})}};(0,n.useEffect)((()=>{o();const e=()=>{s((e=>(0,a.A)((0,a.A)({},e),{},{system:(0,a.A)((0,a.A)({},e.system),{},{online:!0})})))},t=()=>{s((e=>(0,a.A)((0,a.A)({},e),{},{system:(0,a.A)((0,a.A)({},e.system),{},{online:!1})})))};return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}),[]),(0,n.useEffect)((()=>{let e;return d&&(e=setInterval(o,1e3*t)),()=>{e&&clearInterval(e)}}),[d,t]);const m=e=>{if(!e)return"Nunca";return new Date(e).toLocaleString()},x=e=>{switch(e.toLowerCase()){case"app":return"text-green-400";case"call":return"text-blue-400";case"user":return"text-purple-400";case"error":return"text-red-400";case"performance":return"text-yellow-400";case"storage":return"text-cyan-400";default:return"text-white"}};return(0,r.jsxs)("div",{className:"max-w-5xl mx-auto p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Painel de Monitoramento"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:o,children:"Atualizar Agora"}),(0,r.jsx)("button",{className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",onClick:()=>{const s=l.A.getEvents(null,1e3),t={stats:e,events:s,timestamp:(new Date).toISOString(),appVersion:"1.0.0"},a=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(a),r=document.createElement("a");r.href=n,r.download="quero-paz-monitoring-".concat((new Date).toISOString().slice(0,10),".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n),l.A.trackEvent(l.A.EVENT_TYPES.USER,"export_monitoring_data",{timestamp:(new Date).toISOString(),eventsCount:s.length})},children:"Exportar Dados"})]})]}),(0,r.jsxs)("div",{className:"mb-4 p-4 bg-gray-100 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("h2",{className:"text-lg font-medium",children:"Auto-Atualiza\xe7\xe3o"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",id:"autoRefresh",checked:d,onChange:e=>c(e.target.checked),className:"mr-2"}),(0,r.jsx)("label",{htmlFor:"autoRefresh",children:"Auto-Refresh"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("label",{htmlFor:"refreshInterval",className:"mr-2",children:"Intervalo (s):"}),(0,r.jsx)("input",{type:"number",id:"refreshInterval",min:"5",max:"300",value:t,onChange:e=>i(Number(e.target.value)),className:"w-16 p-1 border rounded"})]})]})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["\xdaltima atualiza\xe7\xe3o: ",(new Date).toLocaleString()]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,r.jsxs)("div",{className:"p-4 border rounded-lg shadow-sm",children:[(0,r.jsx)("h2",{className:"text-lg font-medium mb-2",children:"Armazenamento"}),(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,r.jsx)("span",{children:"Utiliza\xe7\xe3o"}),(0,r.jsxs)("span",{children:[e.storage.percentage,"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,r.jsx)("div",{className:"h-2.5 rounded-full ".concat(e.storage.percentage>80?"bg-red-600":e.storage.percentage>60?"bg-yellow-400":"bg-green-600"),style:{width:"".concat(e.storage.percentage,"%")}})})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsxs)("span",{children:["Usado: ",e.storage.used," MB"]}),(0,r.jsxs)("span",{children:["Total: ",e.storage.quota," MB"]})]})]}),(0,r.jsxs)("div",{className:"p-4 border rounded-lg shadow-sm",children:[(0,r.jsx)("h2",{className:"text-lg font-medium mb-2",children:"Performance"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("div",{className:"bg-gray-100 p-2 rounded",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Tempo de Carregamento"}),(0,r.jsxs)("div",{className:"font-medium",children:[e.performance.loadTime," ms"]})]}),(0,r.jsxs)("div",{className:"bg-gray-100 p-2 rounded",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Tempo de Renderiza\xe7\xe3o"}),(0,r.jsxs)("div",{className:"font-medium",children:[e.performance.renderTime," ms"]})]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,r.jsxs)("div",{className:"p-4 border rounded-lg shadow-sm",children:[(0,r.jsx)("h2",{className:"text-lg font-medium mb-2",children:"Uso da Aplica\xe7\xe3o"}),(0,r.jsxs)("ul",{className:"space-y-2",children:[(0,r.jsxs)("li",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Chamadas Bloqueadas:"}),(0,r.jsx)("span",{className:"font-medium",children:e.usage.blockedCalls})]}),(0,r.jsxs)("li",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Chamadas Silenciadas:"}),(0,r.jsx)("span",{className:"font-medium",children:e.usage.silencedCalls})]}),(0,r.jsxs)("li",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Inicializa\xe7\xf5es:"}),(0,r.jsx)("span",{className:"font-medium",children:e.usage.appStarts})]}),(0,r.jsxs)("li",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Erros:"}),(0,r.jsx)("span",{className:"font-medium",children:e.usage.errors})]}),(0,r.jsxs)("li",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Total de Eventos:"}),(0,r.jsx)("span",{className:"font-medium",children:e.usage.totalEvents})]}),(0,r.jsxs)("li",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"\xdaltimo Uso:"}),(0,r.jsx)("span",{className:"font-medium",children:m(e.usage.lastUsed)})]}),e.usage.eventsByType&&(0,r.jsx)("li",{className:"mt-3",children:(0,r.jsxs)("details",{children:[(0,r.jsx)("summary",{className:"cursor-pointer font-medium",children:"Eventos por tipo"}),(0,r.jsx)("ul",{className:"mt-2 space-y-1 ml-4 text-sm",children:Object.entries(e.usage.eventsByType).map((e=>{let[s,t]=e;return(0,r.jsxs)("li",{className:"flex justify-between",children:[(0,r.jsxs)("span",{className:"capitalize",children:[s,":"]}),(0,r.jsx)("span",{children:t})]},s)}))})]})})]})]}),(0,r.jsxs)("div",{className:"p-4 border rounded-lg shadow-sm",children:[(0,r.jsx)("h2",{className:"text-lg font-medium mb-2",children:"Banco de Dados"}),(0,r.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,r.jsx)("span",{children:"Status:"}),(0,r.jsx)("span",{className:"ml-2 px-2 py-0.5 rounded text-sm ".concat("online"===e.database.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.database.status})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm mb-1",children:"Stores:"}),e.database.stores.length>0?(0,r.jsx)("ul",{className:"text-sm list-disc list-inside",children:e.database.stores.map(((e,s)=>(0,r.jsx)("li",{children:e},s)))}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Nenhum store detectado"})]})]}),(0,r.jsxs)("div",{className:"p-4 border rounded-lg shadow-sm",children:[(0,r.jsx)("h2",{className:"text-lg font-medium mb-2",children:"Informa\xe7\xf5es do Sistema"}),(0,r.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("li",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Status de Rede:"}),(0,r.jsx)("span",{className:"".concat(e.system.online?"text-green-600":"text-red-600"," font-medium"),children:e.system.online?"Online":"Offline"})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("p",{className:"mb-1",children:"Navegador:"}),(0,r.jsx)("p",{className:"text-gray-600 break-words",children:e.system.userAgent})]}),(0,r.jsxs)("li",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Idioma:"}),(0,r.jsx)("span",{children:e.system.language})]})]})]})]}),(0,r.jsxs)("div",{className:"p-4 border rounded-lg shadow-sm mb-6",children:[(0,r.jsx)("h2",{className:"text-lg font-medium mb-2",children:"Resultados de Testes"}),e.tests.lastRun?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,r.jsx)("span",{children:"\xdaltimo Teste:"}),(0,r.jsx)("span",{className:"ml-2",children:m(e.tests.lastRun)}),(0,r.jsx)("span",{className:"ml-2 px-2 py-0.5 rounded text-sm ".concat("passed"===e.tests.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"passed"===e.tests.status?"PASSOU":"FALHOU"})]}),e.tests.results&&(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("h3",{className:"text-md font-medium mb-2",children:"Detalhes por Teste:"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(e.tests.results).map((e=>{let[s,t]=e;return(0,r.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("h4",{className:"font-medium capitalize",children:s}),(0,r.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat(t.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:t.success?"OK":"ERRO"})]}),t.error&&(0,r.jsx)("p",{className:"text-xs text-red-600",children:t.error})]},s)}))})]})]}):(0,r.jsx)("p",{className:"text-gray-500",children:"Nenhum teste executado"}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("button",{className:"px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600",onClick:()=>{window.QueroTestes&&"function"===typeof window.QueroTestes.runAllTests?window.QueroTestes.runAllTests().then(o):alert("Scripts de teste n\xe3o est\xe3o dispon\xedveis. Carregue o arquivo de testes primeiro.")},children:"Executar Testes Agora"})})]}),(0,r.jsxs)("div",{className:"p-4 border rounded-lg shadow-sm mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("h2",{className:"text-lg font-medium",children:"Eventos Recentes"}),(0,r.jsx)("div",{className:"flex space-x-2",children:(0,r.jsx)("button",{className:"px-3 py-1 bg-gray-200 text-gray-800 text-sm rounded hover:bg-gray-300",onClick:()=>{l.A.clearEvents(),o()},children:"Limpar Eventos"})})]}),(0,r.jsx)("div",{className:"bg-gray-900 text-gray-100 p-3 rounded font-mono text-sm h-60 overflow-y-auto",children:e.events&&e.events.length>0?e.events.map(((e,s)=>(0,r.jsxs)("div",{className:"mb-1 ".concat(x(e.type)),children:["[",new Date(e.timestamp).toLocaleTimeString(),"] [",e.type.toUpperCase(),"] ",e.action,":",Object.entries(e.data||{}).map((e=>{let[s,t]=e;return"timestamp"!==s?" ".concat(s,"=").concat("object"===typeof t?JSON.stringify(t):t):""}))]},s))):(0,r.jsx)("div",{className:"text-gray-400",children:"Nenhum evento registrado"})})]}),(0,r.jsxs)("div",{className:"p-4 border rounded-lg shadow-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("h2",{className:"text-lg font-medium",children:"Logs do Sistema"}),(0,r.jsx)("button",{className:"px-3 py-1 bg-gray-200 text-gray-800 text-sm rounded hover:bg-gray-300",onClick:()=>{localStorage.removeItem("appLogs"),s((e=>(0,a.A)((0,a.A)({},e),{},{logs:[]})))},children:"Limpar Logs"})]}),(0,r.jsxs)("div",{className:"bg-gray-900 text-gray-100 p-3 rounded font-mono text-sm h-40 overflow-y-auto",children:[(0,r.jsxs)("div",{className:"text-green-400",children:["[INFO] Sistema inicializado em ",(new Date).toLocaleString()]}),(0,r.jsx)("div",{className:"text-blue-400",children:"[STORAGE] IndexedDB inicializado"}),(0,r.jsx)("div",{className:"text-yellow-400",children:"[WARN] Service Worker ainda n\xe3o registrado"}),(0,r.jsxs)("div",{className:"text-blue-400",children:["[NETWORK] Status de rede: ",e.system.online?"Online":"Offline"]}),(0,r.jsx)("div",{className:"text-green-400",children:"[SECURITY] Criptografia inicializada"}),e.tests.lastRun&&(0,r.jsxs)("div",{className:"".concat("passed"===e.tests.status?"text-green-400":"text-red-400"),children:["[TEST] Testes executados em ",m(e.tests.lastRun)," - Status: ",e.tests.status]})]})]})]})}}}]);
//# sourceMappingURL=304.6b597a6f.chunk.js.map