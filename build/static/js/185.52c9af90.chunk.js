"use strict";(self.webpackChunkquero_paz=self.webpackChunkquero_paz||[]).push([[185],{9185:(e,s,a)=>{a.r(s),a.d(s,{default:()=>n});var t=a(9379),o=a(5043);const r={MESSAGE_RECEIVED:"message.received",MESSAGE_SENT:"message.sent",SYNC_COMPLETED:"sync.completed",USER_ACTIVITY:"user.activity",PRIVACY_CHANGED:"privacy.changed",SECURITY_ALERT:"security.alert",APP_STATUS_CHANGED:"app_status_changed",CUSTOM:"custom"},i={initialize:async()=>(console.log("[INFO] Servi\xe7o de webhooks estar\xe1 dispon\xedvel em uma vers\xe3o futura"),Promise.resolve()),getWebhooks:async()=>Promise.resolve([]),addWebhook:async e=>(console.log("[INFO] Adi\xe7\xe3o de webhooks n\xe3o dispon\xedvel nesta vers\xe3o"),Promise.resolve((0,t.A)({id:Date.now().toString(),createdAt:(new Date).toISOString(),status:"disabled"},e))),updateWebhook:async(e,s)=>(console.log("[INFO] Atualiza\xe7\xe3o de webhooks n\xe3o dispon\xedvel nesta vers\xe3o"),Promise.resolve(null)),deleteWebhook:async e=>(console.log("[INFO] Remo\xe7\xe3o de webhooks n\xe3o dispon\xedvel nesta vers\xe3o"),Promise.resolve(!0)),triggerEvent:async(e,s)=>(console.log("[INFO] Disparo de eventos (".concat(e,") n\xe3o dispon\xedvel nesta vers\xe3o")),Promise.resolve([])),getLogs:async()=>Promise.resolve([]),clearLogs:async()=>Promise.resolve(!0),testWebhook:async e=>(console.log("[INFO] Teste de webhooks n\xe3o dispon\xedvel nesta vers\xe3o"),Promise.resolve({success:!1,error:"Funcionalidade n\xe3o dispon\xedvel nesta vers\xe3o",timestamp:(new Date).toISOString()}))};var l=a(579);const n=()=>{const[e,s]=(0,o.useState)([]),[a,n]=(0,o.useState)([]),[c,d]=(0,o.useState)(!0),[m,u]=(0,o.useState)(!1),[p,x]=(0,o.useState)(""),[h,g]=(0,o.useState)(""),[b,v]=(0,o.useState)({name:"",url:"",eventTypes:[],headers:{}}),[y,f]=(0,o.useState)(!1);(0,o.useEffect)((()=>{(async()=>{await i.initialize(),await N()})()}),[]);const N=(0,o.useCallback)((async()=>{d(!0);try{const[e,a]=await Promise.all([i.getWebhooks(),i.getLogs(25)]);s(e),n(a)}catch(e){console.error("Erro ao carregar dados de webhooks:",e)}finally{d(!1)}}),[]),j=e=>{const{name:s,value:a}=e.target;v((e=>(0,t.A)((0,t.A)({},e),{},{[s]:a})))},w=e=>{const{value:s,checked:a}=e.target;v((e=>{const o=a?[...e.eventTypes,s]:e.eventTypes.filter((e=>e!==s));return(0,t.A)((0,t.A)({},e),{},{eventTypes:o})}))},k=e=>{switch(e){case"active":return(0,l.jsx)("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:"Ativo"});case"inactive":return(0,l.jsx)("span",{className:"bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded-full",children:"Inativo"});default:return null}},S=e=>({[r.CALL_BLOCKED]:"Chamada Bloqueada",[r.CALL_SILENCED]:"Chamada Silenciada",[r.RULE_TRIGGERED]:"Regra Acionada",[r.PROFILE_ACTIVATED]:"Perfil Ativado",[r.VOICEMAIL_RECEIVED]:"Voicemail Recebido",[r.APP_STATUS_CHANGED]:"Status do App Alterado",[r.CUSTOM]:"Personalizado",all:"Todos",test:"Teste"}[e]||e);return(0,l.jsx)("div",{className:"max-w-3xl mx-auto space-y-6 p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-paz shadow-paz p-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-paz-blue-800 mb-2",children:"Integra\xe7\xf5es e Webhooks"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"Conecte o Quero Paz a outros servi\xe7os e plataformas para expandir suas funcionalidades."}),(0,l.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,l.jsx)("h3",{className:"font-medium text-lg mb-3",children:"Configura\xe7\xe3o R\xe1pida"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,l.jsxs)("select",{className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-paz-blue-500 focus:border-paz-blue-500",value:p,onChange:e=>x(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"Selecione um servi\xe7o"}),(0,l.jsx)("option",{value:"slack",children:"Slack"}),(0,l.jsx)("option",{value:"discord",children:"Discord"}),(0,l.jsx)("option",{value:"ifttt",children:"IFTTT"}),(0,l.jsx)("option",{value:"zapier",children:"Zapier"})]}),(0,l.jsx)("input",{type:"text",placeholder:"slack"===p?"URL do webhook do Slack":"discord"===p?"URL do webhook do Discord":"ifttt"===p?"Chave do IFTTT":"zapier"===p?"URL do webhook do Zapier":"URL/Token do servi\xe7o",value:h,onChange:e=>g(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-paz-blue-500 focus:border-paz-blue-500"}),(0,l.jsx)("button",{onClick:async()=>{if(p&&h)try{await i.quickSetup(p,h),x(""),g(""),await N()}catch(e){console.error("Erro na configura\xe7\xe3o r\xe1pida:",e),alert("Erro: ".concat(e.message||"N\xe3o foi poss\xedvel configurar a integra\xe7\xe3o"))}else alert("Selecione um servi\xe7o e forne\xe7a a URL/token")},disabled:!p||!h,className:"px-4 py-2 bg-paz-blue-600 text-white rounded-lg disabled:opacity-50 hover:bg-paz-blue-700 transition-colors whitespace-nowrap",children:"Configurar"})]}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:"slack"===p?"Configure notifica\xe7\xf5es para o Slack quando chamadas forem bloqueadas.":"discord"===p?"Receba notifica\xe7\xf5es no Discord sobre chamadas bloqueadas e voicemails.":"ifttt"===p?"Use o IFTTT para criar automa\xe7\xf5es com outros servi\xe7os quando eventos ocorrerem.":"zapier"===p?"Integre com o Zapier para conectar com milhares de apps e servi\xe7os.":"Selecione um servi\xe7o para realizar uma configura\xe7\xe3o r\xe1pida."})]})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("h3",{className:"font-medium text-lg",children:"Webhooks Configurados"}),(0,l.jsx)("button",{onClick:()=>u(!m),className:"px-3 py-2 bg-paz-blue-600 text-white rounded-lg hover:bg-paz-blue-700 transition-colors text-sm",children:m?"Cancelar":"Adicionar Webhook"})]}),m&&(0,l.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),b.url&&b.name&&0!==b.eventTypes.length)try{await i.addWebhook(b),v({name:"",url:"",eventTypes:[],headers:{}}),u(!1),await N()}catch(s){console.error("Erro ao adicionar webhook:",s),alert("N\xe3o foi poss\xedvel adicionar o webhook.")}else alert("Preencha todos os campos obrigat\xf3rios")},className:"mb-6 p-4 border border-gray-200 rounded-lg",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome*"}),(0,l.jsx)("input",{type:"text",name:"name",value:b.name,onChange:j,placeholder:"Ex: Notifica\xe7\xf5es do Slack",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-paz-blue-500 focus:border-paz-blue-500",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL*"}),(0,l.jsx)("input",{type:"url",name:"url",value:b.url,onChange:j,placeholder:"Ex: https://hooks.slack.com/services/...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-paz-blue-500 focus:border-paz-blue-500",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipos de Evento*"}),(0,l.jsx)("div",{className:"grid grid-cols-2 gap-2",children:Object.values(r).map((e=>(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",id:"event-".concat(e),value:e,checked:b.eventTypes.includes(e),onChange:w,className:"mr-2"}),(0,l.jsx)("label",{htmlFor:"event-".concat(e),className:"text-sm",children:S(e)})]},e)))})]})]}),(0,l.jsx)("div",{className:"mt-4 flex justify-end",children:(0,l.jsx)("button",{type:"submit",className:"px-4 py-2 bg-paz-blue-600 text-white rounded-lg hover:bg-paz-blue-700 transition-colors",children:"Adicionar Webhook"})})]}),c?(0,l.jsx)("div",{className:"flex justify-center py-8",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-paz-blue-600"})}):e.length>0?(0,l.jsx)("div",{className:"space-y-4",children:e.map((s=>(0,l.jsxs)("div",{className:"p-4 bg-white rounded-lg border border-gray-200",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("h4",{className:"font-medium",children:s.name}),(0,l.jsx)("div",{className:"ml-2",children:k(s.status)})]}),(0,l.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:s.url}),(0,l.jsx)("div",{className:"mt-2 flex flex-wrap gap-1",children:s.eventTypes.map((e=>(0,l.jsx)("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded",children:S(e)},e)))})]}),(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"relative inline-block w-10 align-middle select-none",children:[(0,l.jsx)("input",{type:"checkbox",id:"toggle-".concat(s.id),checked:"active"===s.status,onChange:()=>(async s=>{const a=e.find((e=>e.id===s));if(!a)return;const t="active"===a.status?"inactive":"active";try{await i.updateWebhook(s,{status:t}),await N()}catch(o){console.error("Erro ao atualizar status:",o)}})(s.id),className:"sr-only peer"}),(0,l.jsx)("label",{htmlFor:"toggle-".concat(s.id),className:"block h-6 overflow-hidden rounded-full bg-gray-300 cursor-pointer peer-checked:bg-paz-blue-600",children:(0,l.jsx)("span",{className:"absolute transform transition-transform duration-200 ease-in-out left-1 top-1 bg-white rounded-full h-4 w-4 peer-checked:translate-x-4"})})]})})]}),(0,l.jsxs)("div",{className:"mt-3 flex justify-end space-x-2",children:[(0,l.jsx)("button",{onClick:()=>(async e=>{try{const s=await i.testWebhook(e);s.success?alert("Teste enviado com sucesso!"):alert("Erro no teste: ".concat(s.error)),await N()}catch(s){console.error("Erro ao testar webhook:",s),alert("N\xe3o foi poss\xedvel testar o webhook.")}})(s.id),className:"px-3 py-1 text-sm bg-gray-100 text-gray-800 rounded hover:bg-gray-200 transition-colors",children:"Testar"}),(0,l.jsx)("button",{onClick:()=>(async e=>{if(confirm("Tem certeza que deseja excluir este webhook?"))try{await i.deleteWebhook(e),await N()}catch(s){console.error("Erro ao excluir webhook:",s)}})(s.id),className:"px-3 py-1 text-sm bg-red-100 text-red-800 rounded hover:bg-red-200 transition-colors",children:"Excluir"})]})]},s.id)))}):(0,l.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[(0,l.jsx)("p",{className:"text-gray-500",children:"Nenhum webhook configurado"}),(0,l.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Adicione webhooks para integrar com outros servi\xe7os"})]})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h3",{className:"font-medium text-lg mb-3",children:"Simular Evento"}),(0,l.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Object.values(r).map((e=>(0,l.jsx)("button",{onClick:()=>(async e=>{try{const s={[r.CALL_BLOCKED]:{phoneNumber:"(11) 98765-4321",reason:"N\xfamero bloqueado por regra",timestamp:(new Date).toISOString()},[r.CALL_SILENCED]:{phoneNumber:"(11) 98765-4321",timestamp:(new Date).toISOString()},[r.RULE_TRIGGERED]:{ruleId:"rule_123",ruleName:"Bloqueio Noturno",timestamp:(new Date).toISOString()},[r.PROFILE_ACTIVATED]:{profileId:"profile_123",profileName:"Modo Reuni\xe3o",timestamp:(new Date).toISOString()},[r.VOICEMAIL_RECEIVED]:{phoneNumber:"(11) 98765-4321",duration:25,timestamp:(new Date).toISOString()},[r.APP_STATUS_CHANGED]:{newStatus:"active",previousStatus:"inactive",timestamp:(new Date).toISOString()},[r.CUSTOM]:{message:"Evento personalizado",timestamp:(new Date).toISOString()}}[e],a=await i.triggerEvent(e,s);alert("Evento disparado para ".concat(a.length," webhook(s)")),await N()}catch(s){console.error("Erro ao disparar evento:",s),alert("N\xe3o foi poss\xedvel disparar o evento.")}})(e),className:"p-2 text-sm bg-gray-100 text-gray-800 rounded hover:bg-gray-200 transition-colors",children:S(e)},e)))})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2 cursor-pointer",onClick:()=>f(!y),children:[(0,l.jsx)("h3",{className:"font-medium text-lg",children:"Logs de Webhooks"}),(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform ".concat(y?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&(0,l.jsx)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:a.length>0?(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),(0,l.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Evento"}),(0,l.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map((e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:new Date(e.timestamp).toLocaleString()}),(0,l.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:S(e.eventType)}),(0,l.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:e.success?(0,l.jsx)("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"Sucesso"}):(0,l.jsx)("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded-full",children:"Falha"})})]},e.id)))})]})}):(0,l.jsx)("div",{className:"text-center py-4 text-gray-500",children:"Nenhum log dispon\xedvel"})})]})]})})}}}]);
//# sourceMappingURL=185.52c9af90.chunk.js.map