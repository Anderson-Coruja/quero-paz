(self.webpackChunkquero_paz=self.webpackChunkquero_paz||[]).push([[265],{69:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(9379),r=a(5043),n=a(7505),i=a(8583);const o={dataRetention:{enabled:!0,retentionDays:{calls:30,logs:15,reports:90},keepBlocked:!0},sharing:{contributeToReputation:!0,privacyLevel:"balanced",anonymizeContacts:!0},storage:{storeCallHistory:!0,encryptSensitiveData:!0}};const l=new class{constructor(){this.settings=(0,s.A)({},o),this.initialized=!1}async initialize(){if(!this.initialized)try{const e=await n.A.getItem("settings","privacySettings");e&&(this.settings=(0,s.A)((0,s.A)({},o),e)),this._scheduleDataCleanup(),this.initialized=!0,console.log("Gerenciador de privacidade inicializado")}catch(e){throw console.error("Erro ao inicializar gerenciador de privacidade:",e),e}}async updateSettings(e){try{return this.settings=(0,s.A)((0,s.A)({},this.settings),e),await n.A.setItem("settings","privacySettings",this.settings),this._scheduleDataCleanup(),this.settings}catch(t){throw console.error("Erro ao atualizar configura\xe7\xf5es de privacidade:",t),t}}getSettings(){return(0,s.A)({},this.settings)}anonymizeData(e,t){if("maximum"===this.settings.sharing.privacyLevel)return this._createAggregatedData(e,t);const a=JSON.parse(JSON.stringify(e));switch(t){case"calls":return this._anonymizeCalls(a);case"contacts":return this._anonymizeContacts(a);case"reputation":return this._anonymizeReputationData(a);default:return this._removeIdentifiableInfo(a)}}async performDataCleanup(){try{if(!this.settings.dataRetention.enabled)return{cleaned:!1,reason:"Data retention disabled"};const e={calls:0,logs:0,reports:0,total:0},t=new Date;return this.settings.dataRetention.retentionDays.calls>0&&(e.calls=await this._cleanupOldData("calls",this.settings.dataRetention.retentionDays.calls,t,this.settings.dataRetention.keepBlocked)),this.settings.dataRetention.retentionDays.logs>0&&(e.logs=await this._cleanupOldData("logs",this.settings.dataRetention.retentionDays.logs,t)),this.settings.dataRetention.retentionDays.reports>0&&(e.reports=await this._cleanupOldData("reputation",this.settings.dataRetention.retentionDays.reports,t,!0)),e.total=e.calls+e.logs+e.reports,{cleaned:!0,timestamp:t.toISOString(),stats:e}}catch(e){return console.error("Erro durante limpeza de dados:",e),{cleaned:!1,error:e.message}}}async purgeAllData(e){if("CONFIRM_PURGE_ALL_DATA"!==e)throw new Error("Chave de confirma\xe7\xe3o inv\xe1lida para exclus\xe3o de dados");try{const e=["calls","reputation","logs","settings","sync_queue","profiles","community_data","rules"];for(const t of e)await n.A.clearStore(t);return this.settings=(0,s.A)({},o),!0}catch(t){throw console.error("Erro durante exclus\xe3o completa de dados:",t),t}}isCompliant(e,t,a){return"calls"!==e||this.settings.storage.storeCallHistory}_scheduleDataCleanup(){this._cleanupTimer&&clearTimeout(this._cleanupTimer),this.settings.dataRetention.enabled&&(this._cleanupTimer=setTimeout((async()=>{try{await this.performDataCleanup()}catch(e){console.error("Erro durante limpeza agendada:",e)}finally{this._scheduleDataCleanup()}}),864e5))}async _cleanupOldData(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{const r=await n.A.getAllItems(e),i=new Date(a.getTime()-864e5*t);let o=0;for(const t of r){const{key:a,value:r}=t,l=new Date(r.timestamp||r.date||r.createdAt||0);l&&!isNaN(l.getTime())&&(s&&this._isImportantItem(r,e)||l<i&&(await n.A.removeItem(e,a),o++))}return o}catch(r){return console.error("Erro ao limpar dados antigos de ".concat(e,":"),r),0}}_isImportantItem(e,t){switch(t){case"calls":return this.settings.dataRetention.keepBlocked&&e.blocked;case"reputation":return"dangerous"===e.category||"scam"===e.category;default:return!1}}_anonymizeCalls(e){return Array.isArray(e)?e.map((e=>{const t=(0,s.A)({},e);return t.phoneNumber&&(t.phoneHash=(0,i.oH)(t.phoneNumber),delete t.phoneNumber),delete t.contactName,delete t.notes,t})):e}_anonymizeContacts(e){return this.settings.sharing.anonymizeContacts&&Array.isArray(e)?e.map((e=>({phoneHash:(0,i.oH)(e.phoneNumber||""),isContact:!0,isTrusted:!!e.isTrusted,isBlocked:!!e.isBlocked}))):[]}_anonymizeReputationData(e){const t=this.settings.sharing.privacyLevel;if("maximum"===t)return{category:e.category,score:e.communityScore,reportCount:e.reportCount,lastUpdated:(new Date).toISOString()};if("balanced"===t){const t=(0,s.A)({},e);return t.events&&(t.events=t.events.map((e=>({eventType:e.eventType,timestamp:e.timestamp,category:e.category})))),t}return e}_createAggregatedData(e,t){switch(t){case"calls":return{totalCalls:Array.isArray(e)?e.length:0,blockedCount:Array.isArray(e)?e.filter((e=>e.blocked)).length:0,timestamp:(new Date).toISOString(),isAggregated:!0};case"reputation":return{category:e.category,isAggregated:!0};default:return{isAggregated:!0}}}_removeIdentifiableInfo(e){const t=["name","firstName","lastName","fullName","email","phone","phoneNumber","address","city","state","zipCode","postalCode","birthDate","age","ssn","socialSecurityNumber","passport","license","idNumber","notes"];if(Array.isArray(e))return e.map((e=>this._removeIdentifiableInfo(e)));if(e&&"object"===typeof e){const a={};for(const[s,r]of Object.entries(e))t.includes(s)||(a[s]=r&&"object"===typeof r?this._removeIdentifiableInfo(r):r);return a}return e}};var c=a(579);const d=()=>{const[e,t]=(0,r.useState)(null),[a,n]=(0,r.useState)(!0),[i,o]=(0,r.useState)("");(0,r.useEffect)((()=>{(async()=>{try{await l.initialize();const e=l.getSettings();t(e),n(!1)}catch(e){console.error("Erro ao carregar configura\xe7\xf5es de privacidade:",e),n(!1)}})()}),[]);const d=(a,r,n)=>{e&&t((0,s.A)((0,s.A)({},e),{},{[a]:(0,s.A)((0,s.A)({},e[a]),{},{[r]:n})}))},m=(a,r,n,i)=>{e&&t((0,s.A)((0,s.A)({},e),{},{[a]:(0,s.A)((0,s.A)({},e[a]),{},{[r]:(0,s.A)((0,s.A)({},e[a][r]),{},{[n]:i})})}))};return a?(0,c.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,c.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-paz-blue-600"})}):e?(0,c.jsx)("div",{className:"max-w-3xl mx-auto space-y-6 p-4",children:(0,c.jsxs)("div",{className:"bg-white rounded-paz shadow-paz p-6",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold text-paz-blue-800 mb-4",children:"Configura\xe7\xf5es de Privacidade"}),(0,c.jsx)("p",{className:"text-gray-600 mb-6",children:"Configure como seus dados s\xe3o armazenados, processados e compartilhados."}),(0,c.jsxs)("div",{className:"mb-8 bg-gray-50 p-4 rounded-lg",children:[(0,c.jsxs)("h3",{className:"font-semibold text-lg mb-3 flex items-center",children:[(0,c.jsx)("span",{className:"mr-2",children:"\ud83d\udcc5"})," Reten\xe7\xe3o de dados"]}),(0,c.jsxs)("div",{className:"ml-2 space-y-4",children:[(0,c.jsx)("div",{className:"flex items-center justify-between",children:(0,c.jsxs)("label",{className:"flex items-center",children:[(0,c.jsx)("input",{type:"checkbox",checked:e.dataRetention.enabled,onChange:e=>d("dataRetention","enabled",e.target.checked),className:"mr-2 h-4 w-4 text-paz-blue-600"}),(0,c.jsx)("span",{children:"Limpar dados antigos automaticamente"})]})}),e.dataRetention.enabled&&(0,c.jsxs)("div",{className:"space-y-3 mt-2 pl-6",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manter hist\xf3rico de chamadas por:"}),(0,c.jsxs)("select",{value:e.dataRetention.retentionDays.calls,onChange:e=>m("dataRetention","retentionDays","calls",Number(e.target.value)),className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-paz-blue-500 focus:border-paz-blue-500",children:[(0,c.jsx)("option",{value:7,children:"7 dias"}),(0,c.jsx)("option",{value:15,children:"15 dias"}),(0,c.jsx)("option",{value:30,children:"30 dias"}),(0,c.jsx)("option",{value:90,children:"90 dias"}),(0,c.jsx)("option",{value:180,children:"6 meses"}),(0,c.jsx)("option",{value:365,children:"1 ano"})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manter logs por:"}),(0,c.jsxs)("select",{value:e.dataRetention.retentionDays.logs,onChange:e=>m("dataRetention","retentionDays","logs",Number(e.target.value)),className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-paz-blue-500 focus:border-paz-blue-500",children:[(0,c.jsx)("option",{value:7,children:"7 dias"}),(0,c.jsx)("option",{value:15,children:"15 dias"}),(0,c.jsx)("option",{value:30,children:"30 dias"}),(0,c.jsx)("option",{value:90,children:"90 dias"})]})]}),(0,c.jsx)("div",{className:"flex items-center justify-between",children:(0,c.jsxs)("label",{className:"flex items-center",children:[(0,c.jsx)("input",{type:"checkbox",checked:e.dataRetention.keepBlocked,onChange:e=>d("dataRetention","keepBlocked",e.target.checked),className:"mr-2 h-4 w-4 text-paz-blue-600"}),(0,c.jsx)("span",{children:"Manter hist\xf3rico de n\xfameros bloqueados"})]})}),(0,c.jsxs)("div",{className:"mt-2",children:[(0,c.jsx)("button",{onClick:async()=>{try{o("cleaning");const e=await l.performDataCleanup();console.log("Resultado da limpeza:",e),o("cleaned"),setTimeout((()=>o("")),3e3)}catch(e){console.error("Erro ao limpar dados:",e),o("error")}},disabled:"cleaning"===i,className:"px-4 py-1.5 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors text-sm",children:"cleaning"===i?"Limpando...":"Limpar dados antigos agora"}),"cleaned"===i&&(0,c.jsx)("span",{className:"text-green-600 text-sm ml-2",children:"\u2713 Dados antigos removidos"})]})]})]})]}),(0,c.jsxs)("div",{className:"mb-8 bg-gray-50 p-4 rounded-lg",children:[(0,c.jsxs)("h3",{className:"font-semibold text-lg mb-3 flex items-center",children:[(0,c.jsx)("span",{className:"mr-2",children:"\ud83d\udd04"})," Compartilhamento"]}),(0,c.jsxs)("div",{className:"ml-2 space-y-4",children:[(0,c.jsx)("div",{className:"flex items-center justify-between",children:(0,c.jsxs)("label",{className:"flex items-center",children:[(0,c.jsx)("input",{type:"checkbox",checked:e.sharing.contributeToReputation,onChange:e=>d("sharing","contributeToReputation",e.target.checked),className:"mr-2 h-4 w-4 text-paz-blue-600"}),(0,c.jsx)("span",{children:"Contribuir com sistema de reputa\xe7\xe3o"})]})}),e.sharing.contributeToReputation&&(0,c.jsxs)("div",{className:"space-y-3 mt-2 pl-6",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"N\xedvel de privacidade:"}),(0,c.jsxs)("select",{value:e.sharing.privacyLevel,onChange:e=>d("sharing","privacyLevel",e.target.value),className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-paz-blue-500 focus:border-paz-blue-500",children:[(0,c.jsx)("option",{value:"maximum",children:"M\xe1ximo - Apenas estat\xedsticas agregadas"}),(0,c.jsx)("option",{value:"balanced",children:"Balanceado - Dados an\xf4nimos"}),(0,c.jsx)("option",{value:"standard",children:"Padr\xe3o - Compartilhamento normal"})]})]}),(0,c.jsx)("div",{className:"flex items-center justify-between",children:(0,c.jsxs)("label",{className:"flex items-center",children:[(0,c.jsx)("input",{type:"checkbox",checked:e.sharing.anonymizeContacts,onChange:e=>d("sharing","anonymizeContacts",e.target.checked),className:"mr-2 h-4 w-4 text-paz-blue-600"}),(0,c.jsx)("span",{children:"Anonimizar informa\xe7\xf5es de contatos"})]})})]})]})]}),(0,c.jsxs)("div",{className:"mb-8 bg-gray-50 p-4 rounded-lg",children:[(0,c.jsxs)("h3",{className:"font-semibold text-lg mb-3 flex items-center",children:[(0,c.jsx)("span",{className:"mr-2",children:"\ud83d\udcbe"})," Armazenamento"]}),(0,c.jsxs)("div",{className:"ml-2 space-y-4",children:[(0,c.jsx)("div",{className:"flex items-center justify-between",children:(0,c.jsxs)("label",{className:"flex items-center",children:[(0,c.jsx)("input",{type:"checkbox",checked:e.storage.storeCallHistory,onChange:e=>d("storage","storeCallHistory",e.target.checked),className:"mr-2 h-4 w-4 text-paz-blue-600"}),(0,c.jsx)("span",{children:"Armazenar hist\xf3rico de chamadas"})]})}),(0,c.jsx)("div",{className:"flex items-center justify-between",children:(0,c.jsxs)("label",{className:"flex items-center",children:[(0,c.jsx)("input",{type:"checkbox",checked:e.storage.encryptSensitiveData,onChange:e=>d("storage","encryptSensitiveData",e.target.checked),className:"mr-2 h-4 w-4 text-paz-blue-600"}),(0,c.jsx)("span",{children:"Criptografar dados sens\xedveis"})]})}),!e.storage.storeCallHistory&&(0,c.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-3 mt-2",children:(0,c.jsxs)("p",{className:"text-sm text-yellow-700",children:[(0,c.jsx)("strong",{children:"Nota:"})," Desativar o armazenamento de hist\xf3rico de chamadas reduzir\xe1 a efic\xe1cia do bloqueio, pois o aplicativo n\xe3o lembrar\xe1 de chamadas anteriores."]})})]})]}),(0,c.jsxs)("div",{className:"mt-6 flex justify-end",children:[(0,c.jsx)("button",{onClick:async()=>{try{o("saving"),await l.updateSettings(e),o("saved"),setTimeout((()=>o("")),3e3)}catch(t){console.error("Erro ao salvar configura\xe7\xf5es:",t),o("error")}},disabled:"saving"===i,className:"px-5 py-2 bg-paz-blue-600 text-white rounded-lg hover:bg-paz-blue-700 transition-colors",children:"saving"===i?"Salvando...":"Salvar Configura\xe7\xf5es"}),"saved"===i&&(0,c.jsx)("span",{className:"text-green-600 flex items-center ml-3",children:"\u2713 Salvo com sucesso"}),"error"===i&&(0,c.jsx)("span",{className:"text-red-600 flex items-center ml-3",children:"\u2717 Erro ao salvar"})]})]})}):(0,c.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,c.jsx)("h3",{className:"text-red-800 font-medium",children:"Erro ao carregar configura\xe7\xf5es"}),(0,c.jsx)("p",{className:"text-red-600",children:"N\xe3o foi poss\xedvel carregar suas configura\xe7\xf5es de privacidade."})]})}},477:()=>{},8583:(e,t,a)=>{"use strict";a.d(t,{af:()=>o,oH:()=>l,yv:()=>i});var s=a(6111),r=a.n(s);const n="QuErO-pAz_MaStEr_KeY_2025-v2",i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;try{const a="string"===typeof e?e:JSON.stringify(e);return{encryptedData:r().AES.encrypt(a,t).toString(),timestamp:(new Date).toISOString()}}catch(a){throw console.error("Erro ao criptografar dados:",a),new Error("Falha na criptografia de dados")}},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;try{if(!e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&""===e.trim())return console.warn("Pacote de dados vazio ou inv\xe1lido, retornando objeto vazio"),{};if(!e.encryptedData)return console.warn("Pacote de dados sem encryptedData, retornando objeto vazio"),{};const{encryptedData:s}=e,n=r().AES.decrypt(s,t).toString(r().enc.Utf8);if(!n)return console.warn("Descriptografia produziu resultado vazio, retornando objeto vazio"),{};try{return JSON.parse(n)}catch(a){return n}}catch(s){return console.error("Erro ao descriptografar dados:",s),{}}},l=e=>{try{const t=e?e.replace(/\D/g,""):"";if(!t)throw new Error("N\xfamero de telefone inv\xe1lido");return r().SHA256(t).toString()}catch(t){throw console.error("Erro ao gerar hash do telefone:",t),new Error("Falha ao processar n\xfamero de telefone")}}}}]);
//# sourceMappingURL=265.3ae6b6a7.chunk.js.map