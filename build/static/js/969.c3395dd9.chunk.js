"use strict";(self.webpackChunkquero_paz=self.webpackChunkquero_paz||[]).push([[969],{7969:(e,a,s)=>{s.r(a),s.d(a,{default:()=>u});var o=s(5043),t=s(9379),r=s(1404);const n={GOOGLE:"google",ICLOUD:"icloud",LOCAL:"local",DEVICE:"device",CUSTOM:"custom"},c="synced_contacts",i="contacts_sync_info",l={async initialize(){await r.A.getItem(i)||await r.A.setItem(i,{lastSyncDate:null,provider:null,autoSync:!1,whitelistGroups:[]});await r.A.getItem(c)||await r.A.setItem(c,[])},async getContacts(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&await this.syncContacts(),await r.A.getItem(c)||[]},getSyncInfo:async()=>await r.A.getItem(i)||{lastSyncDate:null,provider:null,autoSync:!1,whitelistGroups:[]},async syncContacts(){const e=await this.getSyncInfo();if(!e.provider)return{success:!1,error:"Nenhum provedor configurado",contactsCount:0};try{let a=[];switch(e.provider){case n.GOOGLE:a=await this._syncGoogleContacts();break;case n.ICLOUD:a=await this._syncICloudContacts();break;case n.LOCAL:a=await this._syncLocalContacts();break;case n.DEVICE:a=await this._syncDeviceContacts();break;default:return{success:!1,error:"Provedor n\xe3o suportado",contactsCount:0}}return await r.A.setItem(c,a),await r.A.setItem(i,(0,t.A)((0,t.A)({},e),{},{lastSyncDate:(new Date).toISOString()})),{success:!0,contactsCount:a.length,lastSyncDate:(new Date).toISOString()}}catch(a){return console.error("Erro durante sincroniza\xe7\xe3o de contatos:",a),{success:!1,error:a.message||"Erro desconhecido durante sincroniza\xe7\xe3o",contactsCount:0}}},async configureProvider(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Object.values(n).includes(e))return{success:!1,error:"Provedor n\xe3o suportado"};try{const s=await this.getSyncInfo();return await r.A.setItem(i,(0,t.A)((0,t.A)({},s),{},{provider:e,config:(0,t.A)((0,t.A)({},s.config),a)})),{success:!0,provider:e}}catch(s){return console.error("Erro ao configurar provedor:",s),{success:!1,error:s.message||"Erro desconhecido ao configurar provedor"}}},async configureWhitelistGroups(e){try{const a=await this.getSyncInfo();return await r.A.setItem(i,(0,t.A)((0,t.A)({},a),{},{whitelistGroups:e})),{success:!0,whitelistGroups:e}}catch(a){return console.error("Erro ao configurar grupos de lista branca:",a),{success:!1,error:a.message||"Erro desconhecido ao configurar grupos"}}},async searchContacts(e){if(!e||e.length<2)return[];const a=await this.getContacts(),s=e.toLowerCase();return a.filter((a=>!(!a.name||!a.name.toLowerCase().includes(s))||!!a.phoneNumbers&&a.phoneNumbers.some((a=>a.number.includes(e)))))},async _syncGoogleContacts(){return console.log("Simulando sincroniza\xe7\xe3o com Google Contacts..."),await new Promise((e=>setTimeout(e,1500))),this._generateMockContacts(50)},async _syncICloudContacts(){return console.log("Simulando sincroniza\xe7\xe3o com iCloud..."),await new Promise((e=>setTimeout(e,1200))),this._generateMockContacts(30)},async _syncLocalContacts(){return console.log("Simulando sincroniza\xe7\xe3o com contatos locais..."),await new Promise((e=>setTimeout(e,800))),this._generateMockContacts(20)},async _syncDeviceContacts(){return console.log("Simulando sincroniza\xe7\xe3o com contatos do dispositivo..."),await new Promise((e=>setTimeout(e,1e3))),this._generateMockContacts(40)},_generateMockContacts(e){const a=["Ana Silva","Jo\xe3o Oliveira","Maria Santos","Pedro Costa","Carla Souza","Bruno Ferreira","Juliana Lima","Ricardo Gomes","Fernanda Martins","Luiz Pereira"],s=["Fam\xedlia","Trabalho","Amigos","Escola","Importante"],o=[];for(let t=0;t<e;t++){const e=a[Math.floor(Math.random()*a.length)],r=s[Math.floor(Math.random()*s.length)],n=Math.floor(90*Math.random())+10;o.push({id:"contact_".concat(t),name:e,phoneNumbers:[{type:"mobile",number:"(".concat(n,") 9").concat(Math.floor(1e4*Math.random()),"-").concat(Math.floor(1e4*Math.random()))}],groups:[r],email:"".concat(e.toLowerCase().replace(" ","."),"@exemplo.com"),isFavorite:Math.random()>.8})}return o}};var d=s(579);const u=()=>{const[e,a]=(0,o.useState)([]),[s,t]=(0,o.useState)(null),[r,c]=(0,o.useState)(!0),[i,u]=(0,o.useState)(!1),[m,h]=(0,o.useState)(""),[p,g]=(0,o.useState)([]),[x,v]=(0,o.useState)(null);(0,o.useEffect)((()=>{(async()=>{await l.initialize(),await y()})()}),[]);const y=(0,o.useCallback)((async()=>{c(!0);try{const[e,s]=await Promise.all([l.getContacts(),l.getSyncInfo()]);a(e),t(s)}catch(e){console.error("Erro ao carregar dados de contatos:",e)}finally{c(!1)}}),[]),w=(0,o.useCallback)((async()=>{if(!m||m.length<2)g([]);else try{const e=await l.searchContacts(m);g(e)}catch(e){console.error("Erro ao pesquisar contatos:",e)}}),[m]);(0,o.useEffect)((()=>{w()}),[m,w]);const f=e=>(0,d.jsx)("div",{className:"p-3 bg-white rounded-lg shadow-sm border border-gray-200",children:(0,d.jsxs)("div",{className:"flex items-start",children:[(0,d.jsx)("div",{className:"bg-paz-blue-100 text-paz-blue-700 p-2 rounded-full mr-3",children:(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("h3",{className:"font-medium",children:e.name}),(0,d.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:e.phoneNumbers.map(((e,a)=>(0,d.jsxs)("div",{children:[e.number," ",(0,d.jsxs)("span",{className:"text-gray-400 text-xs",children:["(",e.type,")"]})]},a)))}),e.groups&&e.groups.length>0&&(0,d.jsx)("div",{className:"mt-2 flex flex-wrap gap-1",children:e.groups.map(((e,a)=>(0,d.jsx)("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded",children:e},a)))})]}),e.isFavorite&&(0,d.jsx)("span",{className:"text-yellow-500",children:"\u2b50"})]})},e.id);return(0,d.jsx)("div",{className:"max-w-3xl mx-auto space-y-6 p-4",children:(0,d.jsxs)("div",{className:"bg-white rounded-paz shadow-paz p-6",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-paz-blue-800 mb-2",children:"Sincroniza\xe7\xe3o de Contatos"}),(0,d.jsx)("p",{className:"text-gray-600 mb-6",children:"Sincronize seus contatos para gerenciar melhor as chamadas e criar regras personalizadas."}),r?(0,d.jsx)("div",{className:"flex justify-center py-8",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-paz-blue-600"})}):(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,d.jsx)("h3",{className:"font-medium text-lg mb-2",children:"Status de Sincroniza\xe7\xe3o"}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,d.jsxs)("div",{className:"bg-white p-3 rounded shadow-sm flex-1",children:[(0,d.jsx)("div",{className:"text-sm text-gray-500",children:"\xdaltima sincroniza\xe7\xe3o"}),(0,d.jsx)("div",{className:"font-semibold",children:null!==s&&void 0!==s&&s.lastSyncDate?new Date(s.lastSyncDate).toLocaleString():"Nunca sincronizado"})]}),(0,d.jsxs)("div",{className:"bg-white p-3 rounded shadow-sm flex-1",children:[(0,d.jsx)("div",{className:"text-sm text-gray-500",children:"Contatos sincronizados"}),(0,d.jsx)("div",{className:"font-semibold",children:e.length})]}),(0,d.jsxs)("div",{className:"bg-white p-3 rounded shadow-sm flex-1",children:[(0,d.jsx)("div",{className:"text-sm text-gray-500",children:"Provedor"}),(0,d.jsx)("div",{className:"font-semibold",children:null!==s&&void 0!==s&&s.provider?s.provider.charAt(0).toUpperCase()+s.provider.slice(1):"N\xe3o configurado"})]})]})]}),(0,d.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,d.jsx)("h3",{className:"font-medium text-lg mb-3",children:"Sincronizar Agora"}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,d.jsxs)("select",{className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-paz-blue-500 focus:border-paz-blue-500",value:x||"",onChange:e=>v(e.target.value),children:[(0,d.jsx)("option",{value:"",children:"Selecione um provedor"}),(0,d.jsx)("option",{value:n.GOOGLE,children:"Google Contacts"}),(0,d.jsx)("option",{value:n.ICLOUD,children:"iCloud"}),(0,d.jsx)("option",{value:n.DEVICE,children:"Contatos do Dispositivo"}),(0,d.jsx)("option",{value:n.LOCAL,children:"Importa\xe7\xe3o Local"})]}),(0,d.jsx)("button",{onClick:async()=>{if(x){u(!0);try{await l.configureProvider(x);const e=await l.syncContacts();e.success?(alert("Sincroniza\xe7\xe3o conclu\xedda! ".concat(e.contactsCount," contatos sincronizados.")),await y()):alert("Erro na sincroniza\xe7\xe3o: ".concat(e.error))}catch(e){console.error("Erro durante sincroniza\xe7\xe3o:",e),alert("Ocorreu um erro durante a sincroniza\xe7\xe3o de contatos.")}finally{u(!1)}}else alert("Selecione um provedor de contatos primeiro")},disabled:i||!x,className:"px-4 py-2 bg-paz-blue-600 text-white rounded-lg disabled:opacity-50 hover:bg-paz-blue-700 transition-colors",children:i?"Sincronizando...":"Sincronizar Contatos"})]}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:x===n.GOOGLE?"Ser\xe1 solicitado acesso \xe0 sua conta Google para sincronizar contatos.":x===n.ICLOUD?"Ser\xe1 necess\xe1rio autorizar o acesso aos seus contatos do iCloud.":x===n.DEVICE?"Os contatos ser\xe3o importados diretamente do seu dispositivo.":x===n.LOCAL?"Voc\xea poder\xe1 importar um arquivo de contatos no formato CSV ou vCard.":"Selecione um provedor para sincronizar seus contatos."})]}),(0,d.jsxs)("div",{className:"mt-6",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("input",{type:"text",placeholder:"Buscar contatos...",value:m,onChange:e=>h(e.target.value),className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-paz-blue-500 focus:border-paz-blue-500"}),(0,d.jsx)("div",{className:"absolute left-3 top-2.5 text-gray-400",children:(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),(0,d.jsx)("div",{className:"mt-4 space-y-3",children:m.length>0?p.length>0?(0,d.jsxs)("div",{children:[(0,d.jsxs)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:[p.length," resultados encontrados"]}),p.map((e=>f(e)))]}):(0,d.jsxs)("div",{className:"text-center py-8 text-gray-500",children:['Nenhum contato encontrado para "',m,'"']}):e.length>0?(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Contatos recentes"}),e.slice(0,5).map((e=>f(e))),e.length>5&&(0,d.jsxs)("button",{className:"mt-3 text-paz-blue-600 text-sm hover:underline w-full text-center",children:["Ver todos os ",e.length," contatos"]})]}):(0,d.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Nenhum contato sincronizado ainda. Sincronize seus contatos para come\xe7ar."})})]})]})]})})}}}]);
//# sourceMappingURL=969.c3395dd9.chunk.js.map