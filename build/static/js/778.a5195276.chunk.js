"use strict";(self.webpackChunkquero_paz=self.webpackChunkquero_paz||[]).push([[778],{3778:(e,s,n)=>{n.r(s),n.d(s,{default:()=>N});var t=n(9379),r=n(5043),i=n(3969),l=n(5895),a=n(1244),c=n(6128),d=n(2097),o=n(172),h=n(8259),x=n(4799),A=n(7443),j=n(756),u=n(6172),m=n(1341),p=n(4375),v=n(2579),y=n(3759),g=n(8065),S=n(3023),b=n(1911),f=n(8776),z=n(256),D=n(9067),w=n(4450),C=n(9441),k=n(5877),R=n(4527),T=n(4770),F=n(9302),B=n(847),W=n(64),O=n(5272),I=n(1553),M=n(5362),E=n(7505),H=(n(1981),n(579));const N=()=>{const[e,s]=(0,r.useState)([]),[n,N]=(0,r.useState)(!0),[q,L]=(0,r.useState)(null),[P,_]=(0,r.useState)({open:!1,details:null}),[K,V]=(0,r.useState)({status:"all",timeRange:"all",sortBy:"date",sortOrder:"desc"}),[G,J]=(0,r.useState)(!1);(0,r.useEffect)((()=>{Q()}),[]);const Q=async()=>{N(!0);try{const e=await E.A.getItem("statistics","syncHistory")||[];s(e)}catch(e){console.error("Error loading sync history:",e)}finally{N(!1)}},U=()=>{_({open:!1,details:null})},X=e=>{if(!e)return"N/A";return new Date(e).toLocaleString()},Y=e=>void 0===e||null===e?"N/A":e<1024?"".concat(e," B"):e<1048576?"".concat((e/1024).toFixed(2)," KB"):"".concat((e/1048576).toFixed(2)," MB"),Z=e=>void 0===e||null===e?"N/A":e<1e3?"".concat(e," ms"):"".concat((e/1e3).toFixed(2)," s"),$=(()=>{let s=[...e];"all"!==K.status&&(s=s.filter((e=>"success"===K.status?e.success:!e.success)));const n=new Date;if("all"!==K.timeRange){let e;"today"===K.timeRange?e=new Date(n.setHours(0,0,0,0)):"week"===K.timeRange?e=new Date(n.setDate(n.getDate()-7)):"month"===K.timeRange&&(e=new Date(n.setMonth(n.getMonth()-1))),s=s.filter((s=>new Date(s.timestamp)>=e))}return s.sort(((e,s)=>{let n,t;return"date"===K.sortBy?(n=new Date(e.timestamp).getTime(),t=new Date(s.timestamp).getTime()):"size"===K.sortBy?(n=e.dataSize||0,t=s.dataSize||0):"duration"===K.sortBy&&(n=e.duration||0,t=s.duration||0),"asc"===K.sortOrder?n-t:t-n})),s})(),ee=(()=>{if(!e.length)return{totalSyncs:0,successRate:0,avgSize:0,avgDuration:0,totalDataSynced:0};const s=e.length,n=e.filter((e=>e.success)).length/s*100,t=e.filter((e=>e.success)),r=t.reduce(((e,s)=>e+(s.dataSize||0)),0),i=t.reduce(((e,s)=>e+(s.duration||0)),0);return{totalSyncs:s,successRate:n.toFixed(1),avgSize:t.length?r/t.length:0,avgDuration:t.length?i/t.length:0,totalDataSynced:r}})();return(0,H.jsxs)(i.A,{sx:{p:3},children:[(0,H.jsx)(l.A,{variant:"h4",component:"h2",gutterBottom:!0,children:"Hist\xf3rico de Sincroniza\xe7\xe3o"}),(0,H.jsx)(a.A,{sx:{mb:3},children:(0,H.jsxs)(c.A,{children:[(0,H.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,H.jsx)(l.A,{variant:"h6",component:"h3",children:"Resumo de Sincroniza\xe7\xe3o"}),(0,H.jsx)(T.A,{sx:{ml:1}})]}),(0,H.jsxs)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:[(0,H.jsxs)(i.A,{sx:{minWidth:120},children:[(0,H.jsx)(l.A,{variant:"body2",color:"textSecondary",children:"Total de Sincroniza\xe7\xf5es"}),(0,H.jsx)(l.A,{variant:"h6",children:ee.totalSyncs})]}),(0,H.jsxs)(i.A,{sx:{minWidth:120},children:[(0,H.jsx)(l.A,{variant:"body2",color:"textSecondary",children:"Taxa de Sucesso"}),(0,H.jsxs)(l.A,{variant:"h6",children:[ee.successRate,"%"]})]}),(0,H.jsxs)(i.A,{sx:{minWidth:120},children:[(0,H.jsx)(l.A,{variant:"body2",color:"textSecondary",children:"Tamanho M\xe9dio"}),(0,H.jsx)(l.A,{variant:"h6",children:Y(ee.avgSize)})]}),(0,H.jsxs)(i.A,{sx:{minWidth:120},children:[(0,H.jsx)(l.A,{variant:"body2",color:"textSecondary",children:"Dura\xe7\xe3o M\xe9dia"}),(0,H.jsx)(l.A,{variant:"h6",children:Z(ee.avgDuration)})]}),(0,H.jsxs)(i.A,{sx:{minWidth:120},children:[(0,H.jsx)(l.A,{variant:"body2",color:"textSecondary",children:"Total de Dados"}),(0,H.jsx)(l.A,{variant:"h6",children:Y(ee.totalDataSynced)})]})]})]})}),(0,H.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,H.jsx)(d.A,{startIcon:(0,H.jsx)(F.A,{}),onClick:()=>{Q()},disabled:n,children:"Atualizar"}),(0,H.jsx)(d.A,{startIcon:(0,H.jsx)(B.A,{}),onClick:()=>J(!0),children:"Filtrar"})]}),n?(0,H.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",p:3},children:(0,H.jsx)(o.A,{})}):0===$.length?(0,H.jsx)(l.A,{variant:"body1",sx:{textAlign:"center",p:3},children:"Nenhum hist\xf3rico de sincroniza\xe7\xe3o encontrado."}):(0,H.jsx)(h.A,{component:x.A,children:(0,H.jsxs)(A.A,{children:[(0,H.jsx)(j.A,{children:(0,H.jsxs)(u.A,{children:[(0,H.jsx)(m.A,{}),(0,H.jsx)(m.A,{children:"Data"}),(0,H.jsx)(m.A,{children:"Tipo"}),(0,H.jsx)(m.A,{children:"Status"}),(0,H.jsx)(m.A,{children:"Tamanho"}),(0,H.jsx)(m.A,{children:"Dura\xe7\xe3o"}),(0,H.jsx)(m.A,{children:"A\xe7\xf5es"})]})}),(0,H.jsx)(p.A,{children:$.map(((n,t)=>(0,H.jsxs)(r.Fragment,{children:[(0,H.jsxs)(u.A,{children:[(0,H.jsx)(m.A,{children:(0,H.jsx)(v.A,{size:"small",onClick:()=>(e=>{L(q===e?null:e)})(t),children:q===t?(0,H.jsx)(W.A,{}):(0,H.jsx)(O.A,{})})}),(0,H.jsx)(m.A,{children:X(n.timestamp)}),(0,H.jsx)(m.A,{children:n.type||"Manual"}),(0,H.jsx)(m.A,{children:(0,H.jsx)(y.A,{label:n.success?"Sucesso":"Falha",color:n.success?"success":"error",size:"small"})}),(0,H.jsx)(m.A,{children:Y(n.dataSize)}),(0,H.jsx)(m.A,{children:Z(n.duration)}),(0,H.jsxs)(m.A,{children:[(0,H.jsx)(g.A,{title:"Ver detalhes",children:(0,H.jsx)(v.A,{size:"small",onClick:()=>{_({open:!0,details:n})},children:(0,H.jsx)(I.A,{fontSize:"small"})})}),(0,H.jsx)(g.A,{title:"Excluir entrada",children:(0,H.jsx)(v.A,{size:"small",onClick:()=>(async n=>{try{const t=e.filter((e=>e.id!==n));s(t),await E.A.setItem("statistics","syncHistory",t)}catch(t){console.error("Error deleting sync history entry:",t)}})(n.id),children:(0,H.jsx)(M.A,{fontSize:"small"})})})]})]}),q===t&&(0,H.jsx)(u.A,{children:(0,H.jsx)(m.A,{colSpan:7,sx:{py:0},children:(0,H.jsxs)(i.A,{sx:{p:2,backgroundColor:"background.default"},children:[(0,H.jsx)(l.A,{variant:"subtitle2",children:"Detalhes da Sincroniza\xe7\xe3o:"}),n.error&&(0,H.jsx)(i.A,{sx:{mt:1},children:(0,H.jsxs)(l.A,{variant:"body2",color:"error",children:["Erro: ",n.error]})}),n.details&&(0,H.jsx)(i.A,{sx:{mt:1},children:(0,H.jsx)(l.A,{variant:"body2",children:n.details.map(((e,s)=>(0,H.jsx)("div",{children:e},s)))})}),n.compressionRatio&&(0,H.jsx)(i.A,{sx:{mt:1},children:(0,H.jsxs)(l.A,{variant:"body2",children:["Taxa de compress\xe3o: ",n.compressionRatio.toFixed(2),"x"]})})]})})})]},n.id||t)))})]})}),(0,H.jsxs)(S.A,{open:G,onClose:()=>J(!1),children:[(0,H.jsx)(b.A,{children:"Filtros"}),(0,H.jsxs)(f.A,{children:[(0,H.jsxs)(z.A,{fullWidth:!0,margin:"normal",children:[(0,H.jsx)(D.A,{children:"Status"}),(0,H.jsxs)(w.A,{value:K.status,label:"Status",onChange:e=>V((0,t.A)((0,t.A)({},K),{},{status:e.target.value})),children:[(0,H.jsx)(C.A,{value:"all",children:"Todos"}),(0,H.jsx)(C.A,{value:"success",children:"Sucesso"}),(0,H.jsx)(C.A,{value:"failed",children:"Falha"})]})]}),(0,H.jsxs)(z.A,{fullWidth:!0,margin:"normal",children:[(0,H.jsx)(D.A,{children:"Per\xedodo"}),(0,H.jsxs)(w.A,{value:K.timeRange,label:"Per\xedodo",onChange:e=>V((0,t.A)((0,t.A)({},K),{},{timeRange:e.target.value})),children:[(0,H.jsx)(C.A,{value:"all",children:"Todo o per\xedodo"}),(0,H.jsx)(C.A,{value:"today",children:"Hoje"}),(0,H.jsx)(C.A,{value:"week",children:"\xdaltima semana"}),(0,H.jsx)(C.A,{value:"month",children:"\xdaltimo m\xeas"})]})]}),(0,H.jsxs)(z.A,{fullWidth:!0,margin:"normal",children:[(0,H.jsx)(D.A,{children:"Ordenar por"}),(0,H.jsxs)(w.A,{value:K.sortBy,label:"Ordenar por",onChange:e=>V((0,t.A)((0,t.A)({},K),{},{sortBy:e.target.value})),children:[(0,H.jsx)(C.A,{value:"date",children:"Data"}),(0,H.jsx)(C.A,{value:"size",children:"Tamanho"}),(0,H.jsx)(C.A,{value:"duration",children:"Dura\xe7\xe3o"})]})]}),(0,H.jsxs)(z.A,{fullWidth:!0,margin:"normal",children:[(0,H.jsx)(D.A,{children:"Ordem"}),(0,H.jsxs)(w.A,{value:K.sortOrder,label:"Ordem",onChange:e=>V((0,t.A)((0,t.A)({},K),{},{sortOrder:e.target.value})),children:[(0,H.jsx)(C.A,{value:"desc",children:"Decrescente"}),(0,H.jsx)(C.A,{value:"asc",children:"Crescente"})]})]})]}),(0,H.jsxs)(k.A,{children:[(0,H.jsx)(d.A,{onClick:()=>J(!1),children:"Cancelar"}),(0,H.jsx)(d.A,{onClick:()=>{J(!1)},variant:"contained",children:"Aplicar"})]})]}),(0,H.jsxs)(S.A,{open:P.open,onClose:U,maxWidth:"md",children:[(0,H.jsx)(b.A,{children:"Detalhes da Sincroniza\xe7\xe3o"}),(0,H.jsx)(f.A,{children:P.details&&(0,H.jsxs)(i.A,{sx:{minWidth:400},children:[(0,H.jsx)(l.A,{variant:"subtitle1",gutterBottom:!0,children:X(P.details.timestamp)}),(0,H.jsx)(R.A,{sx:{my:2}}),(0,H.jsx)(h.A,{children:(0,H.jsx)(A.A,{size:"small",children:(0,H.jsxs)(p.A,{children:[(0,H.jsxs)(u.A,{children:[(0,H.jsx)(m.A,{component:"th",scope:"row",children:"Tipo"}),(0,H.jsx)(m.A,{children:P.details.type||"Manual"})]}),(0,H.jsxs)(u.A,{children:[(0,H.jsx)(m.A,{component:"th",scope:"row",children:"Status"}),(0,H.jsx)(m.A,{children:(0,H.jsx)(y.A,{label:P.details.success?"Sucesso":"Falha",color:P.details.success?"success":"error",size:"small"})})]}),(0,H.jsxs)(u.A,{children:[(0,H.jsx)(m.A,{component:"th",scope:"row",children:"Tamanho"}),(0,H.jsx)(m.A,{children:Y(P.details.dataSize)})]}),(0,H.jsxs)(u.A,{children:[(0,H.jsx)(m.A,{component:"th",scope:"row",children:"Dura\xe7\xe3o"}),(0,H.jsx)(m.A,{children:Z(P.details.duration)})]}),P.details.compressionRatio&&(0,H.jsxs)(u.A,{children:[(0,H.jsx)(m.A,{component:"th",scope:"row",children:"Taxa de compress\xe3o"}),(0,H.jsxs)(m.A,{children:[P.details.compressionRatio.toFixed(2),"x"]})]}),P.details.device&&(0,H.jsxs)(u.A,{children:[(0,H.jsx)(m.A,{component:"th",scope:"row",children:"Dispositivo"}),(0,H.jsx)(m.A,{children:P.details.device})]}),P.details.network&&(0,H.jsxs)(u.A,{children:[(0,H.jsx)(m.A,{component:"th",scope:"row",children:"Rede"}),(0,H.jsx)(m.A,{children:P.details.network})]})]})})}),P.details.error&&(0,H.jsxs)(i.A,{sx:{mt:2},children:[(0,H.jsx)(l.A,{variant:"subtitle2",color:"error",children:"Erro:"}),(0,H.jsx)(i.A,{sx:{p:1,bgcolor:"error.light",borderRadius:1,mt:1},children:(0,H.jsx)(l.A,{variant:"body2",sx:{wordBreak:"break-word"},children:P.details.error})})]}),P.details.details&&P.details.details.length>0&&(0,H.jsxs)(i.A,{sx:{mt:2},children:[(0,H.jsx)(l.A,{variant:"subtitle2",children:"Detalhes adicionais:"}),(0,H.jsx)(List,{children:P.details.details.map(((e,s)=>(0,H.jsx)(l.A,{variant:"body2",component:"li",sx:{ml:2},children:e},s)))})]}),P.details.syncedItems&&(0,H.jsxs)(i.A,{sx:{mt:2},children:[(0,H.jsx)(l.A,{variant:"subtitle2",children:"Itens sincronizados:"}),(0,H.jsx)(h.A,{component:x.A,variant:"outlined",sx:{mt:1},children:(0,H.jsxs)(A.A,{size:"small",children:[(0,H.jsx)(j.A,{children:(0,H.jsxs)(u.A,{children:[(0,H.jsx)(m.A,{children:"Tipo"}),(0,H.jsx)(m.A,{children:"Total"})]})}),(0,H.jsx)(p.A,{children:Object.entries(P.details.syncedItems).map((e=>{let[s,n]=e;return(0,H.jsxs)(u.A,{children:[(0,H.jsx)(m.A,{children:s}),(0,H.jsx)(m.A,{children:n})]},s)}))})]})})]})]})}),(0,H.jsx)(k.A,{children:(0,H.jsx)(d.A,{onClick:U,children:"Fechar"})})]})]})}}}]);
//# sourceMappingURL=778.a5195276.chunk.js.map